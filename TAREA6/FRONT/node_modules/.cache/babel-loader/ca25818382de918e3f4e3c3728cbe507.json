{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.heartbeat = void 0;\n\nvar constants_1 = require(\"./constants\");\n\nfunction heartbeat(ws, options) {\n  var _a = options || {},\n      _b = _a.interval,\n      interval = _b === void 0 ? constants_1.DEFAULT_HEARTBEAT.interval : _b,\n      _c = _a.timeout,\n      timeout = _c === void 0 ? constants_1.DEFAULT_HEARTBEAT.timeout : _c,\n      _d = _a.message,\n      message = _d === void 0 ? constants_1.DEFAULT_HEARTBEAT.message : _d;\n\n  var messageAccepted = false;\n  var pingTimer = setInterval(function () {\n    try {\n      ws.send(message);\n    } catch (error) {// do nothing\n    }\n  }, interval);\n  var timeoutTimer = setInterval(function () {\n    if (!messageAccepted) {\n      ws.close();\n    } else {\n      messageAccepted = false;\n    }\n  }, timeout);\n  ws.addEventListener(\"close\", function () {\n    clearInterval(pingTimer);\n    clearInterval(timeoutTimer);\n  });\n  return function () {\n    messageAccepted = true;\n  };\n}\n\nexports.heartbeat = heartbeat;","map":{"version":3,"mappings":";;;;;;;AAAA;;AAGA,SAAgBA,SAAhB,CAA0BC,EAA1B,EAAyCC,OAAzC,EAAmE;EAC3D,SAIFA,OAAO,IAAI,EAJT;EAAA,IACJC,gBADI;EAAA,IACJC,QAAQ,mBAAGC,8BAAkBD,QAArB,GAA6BD,EADjC;EAAA,IAEJG,eAFI;EAAA,IAEJC,OAAO,mBAAGF,8BAAkBE,OAArB,GAA4BD,EAF/B;EAAA,IAGJE,eAHI;EAAA,IAGJC,OAAO,mBAAGJ,8BAAkBI,OAArB,GAA4BD,EAH/B;;EAMN,IAAIE,eAAe,GAAG,KAAtB;EAEA,IAAMC,SAAS,GAAGC,WAAW,CAAC;IAC5B,IAAI;MACFX,EAAE,CAACY,IAAH,CAAQJ,OAAR;IACD,CAFD,CAEE,OAAOK,KAAP,EAAc,CACd;IACD;EACF,CAN4B,EAM1BV,QAN0B,CAA7B;EAQA,IAAMW,YAAY,GAAGH,WAAW,CAAC;IAC/B,IAAI,CAACF,eAAL,EAAsB;MACpBT,EAAE,CAACe,KAAH;IACD,CAFD,MAEO;MACLN,eAAe,GAAG,KAAlB;IACD;EACF,CAN+B,EAM7BH,OAN6B,CAAhC;EAQAN,EAAE,CAACgB,gBAAH,CAAoB,OAApB,EAA6B;IAC3BC,aAAa,CAACP,SAAD,CAAb;IACAO,aAAa,CAACH,YAAD,CAAb;EACD,CAHD;EAKA,OAAO;IACLL,eAAe,GAAG,IAAlB;EACD,CAFD;AAGD;;AAjCDS","names":["heartbeat","ws","options","_b","interval","constants_1","_c","timeout","_d","message","messageAccepted","pingTimer","setInterval","send","error","timeoutTimer","close","addEventListener","clearInterval","exports"],"sources":["/home/kruiz/TAREAS_SOPES/TAREA6/FRONT/node_modules/react-use-websocket/src/lib/heartbeat.ts"],"sourcesContent":["import { DEFAULT_HEARTBEAT } from \"./constants\";\nimport { HeartbeatOptions } from \"./types\";\n\nexport function heartbeat(ws: WebSocket, options?: HeartbeatOptions): () => void {\n  const {\n    interval = DEFAULT_HEARTBEAT.interval,\n    timeout = DEFAULT_HEARTBEAT.timeout,\n    message = DEFAULT_HEARTBEAT.message,\n  } = options || {};\n\n  let messageAccepted = false;\n\n  const pingTimer = setInterval(() => {\n    try {\n      ws.send(message);\n    } catch (error) {\n      // do nothing\n    }\n  }, interval);\n\n  const timeoutTimer = setInterval(() => {\n    if (!messageAccepted) {\n      ws.close();\n    } else {\n      messageAccepted = false;\n    }\n  }, timeout);\n\n  ws.addEventListener(\"close\", () => {\n    clearInterval(pingTimer);\n    clearInterval(timeoutTimer);\n  });\n\n  return () => {\n    messageAccepted = true;\n  };\n}\n"]},"metadata":{},"sourceType":"script"}